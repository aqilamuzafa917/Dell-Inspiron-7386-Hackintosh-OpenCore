# Dell Inspiron 7386 (Kaby Lake R) OpenCore EFI

This repository contains the OpenCore EFI configuration for running **macOS Tahoe** on a Dell Inspiron 7386 laptop.
![SS](./img/hackintosh.png)
This configuration was generated using OpenCore Simplify and includes manual modifications based on troubleshooting for this specific hardware.

**OpenCore Version:** 1.0.5

---

## ‚ö†Ô∏è Disclaimer

This EFI is provided as-is for the specific hardware listed below. Use at your own risk. Functionality is not guaranteed on different hardware configurations. **Always back up your data before making system changes.**

---

## Hardware Specifications

This EFI is tailored for the following hardware:

| Component | Model | Status Notes |
| :--- | :--- | :--- |
| **Model** | Dell Inspiron 7386 (2-in-1) |  |
| **CPU** | Intel Core i5-8250U (8th-Gen, Kaby Lake R) |  |
| **iGPU** | Intel UHD Graphics 620 | Configured with `AAPL,ig-platform-id=0A00923E`, `device-id=923E` |
| **Audio** | Realtek ALC295 | `layout-id = 75` via `AppleALC.kext`. Manual patch may be needed (See Post-Install). |
| **Wi-Fi / BT** | Intel Wireless-AC 9560 | Wi-Fi via `itlwm.kext` (requires HeliPort app), BT via IntelBluetooth kexts. |
| **Keyboard** | Standard PS/2 Keyboard | `VoodooPS2Keyboard.kext` |
| **Trackpad** | I2C HID Trackpad (DELL0894) | `VoodooI2C.kext` + `VoodooI2CHID.kext`. PS/2 trackpad kexts disabled. |
| **Storage** | NVMe SSD (SK Hynix BC501) | `NVMeFix.kext` included. |
| **Webcam** | Integrated Webcam | Working. |
| **SMBIOS** | `MacBookPro16,1` | Set via `PlatformInfo`. Serials must be user-generated. |

---


## ‚úÖ What Works

* [‚úì] Booting macOS installer & installed OS
* [‚úì] Graphics Acceleration (Intel UHD 620)
* [‚úì] Audio Output/Input (`AppleALC.kext` + Manual Patch if needed)
* [‚úì] Wi-Fi (`itlwm.kext` + HeliPort app)
* [‚úì] Bluetooth
* [‚úì] Keyboard (`VoodooPS2Keyboard.kext`)
* [‚úì] Trackpad & Gestures (`VoodooI2C.kext` + `VoodooI2CHID.kext`)
* [‚úì] USB Ports (Mapped via `USBToolBox.kext` + `UTBMap.kext`)
* [‚úì] Integrated Webcam
* [‚úì] Battery Status (`SMCBatteryManager.kext`)
* [‚úì] CPU Power Management (`SSDT-PLUG.aml`)
* [‚úì] NVMe Storage (`NVMeFix.kext`)
* [‚úì] Sleep/Wake (Basic sleep; Hibernation disabled via `pmset`)
* [‚úì] Restart/Shutdown
* [‚úì] Dual Boot with Windows (via OpenCore picker)

## ‚ùå What Doesn't Work / Disabled

* [‚úó] **Fingerprint Reader:** Not supported by macOS. Disabled via `UTBMap.kext`.
* [‚úó] **Hibernation/Deep Sleep:** Incompatible with Hackintosh. Disabled via `pmset` commands post-install.

---

## ‚öôÔ∏è BIOS Settings (MANDATORY)

These settings **must** be configured correctly:

1.  **Load Defaults:** Start by loading BIOS/Factory Defaults.
2.  **`SATA Mode`**: Set to **`AHCI`**. (Required for macOS & fixed Windows boot).
3.  **`Secure Boot`**: Set to **`Disabled`**. (Required for OpenCore).
4.  **`Virtualization Support` -> `VT for Direct I/O` (Virtualization Technology for Directed I/O)**: Set to **`Disabled`**. (Required for macOS compatibility unless `DisableIoMapper` quirk is used).

---

## üîß EFI Configuration Highlights

This `config.plist` includes the following setup:

* **ACPI:** Includes standard SSDTs generated by OpenCore Simplify (`EC`, `PLUG`, `PNLF`, `SBUS`, `GPI0`, `XOSI`, `USBX`, `PMC`, `MCHC`, `ALSD`, `RTCAWAC`). Also includes `_OSI to XOSI` rename patch.
* **Kernel Quirks:**
    * `AppleXcpmCfgLock`: `True`
    * `ProvideCurrentCpuInfo`: `False`
    * `XhciPortLimit`: `False` (Correct, as `UTBMap.kext` is used).
* **Kexts:** Standard kexts for audio (`AppleALC`), Intel Wi-Fi/BT (`itlwm`, `IntelBluetoothFirmware`, etc.), input (`VoodooI2C`, `VoodooPS2`), system (`Lilu`, `VirtualSMC`, `WhateverGreen`), USB (`USBToolbox`, `UTBMap`), and NVMe (`NVMeFix`).
    * **Trackpad:** `VoodooI2C` + `VoodooI2CHID` enabled. `VoodooPS2Mouse/Trackpad` are disabled.
* **DeviceProperties (iGPU):** Configured with `AAPL,ig-platform-id = 0A00923E`, `device-id = 923E`.
* **NVRAM (Boot Args):** `debug=0x100 keepsyms=1 -lilubetaall -igfxblt`. Consider adding **`-v`** for essential troubleshooting logs during boot.
* **PlatformInfo (SMBIOS):** `MacBookPro16,1` with `UpdateSMBIOSMode` set to `Custom`. **Serials must be generated by the user before installation.**

---

## üöÄ Installation Steps (Single Drive Dual Boot with Windows Pre-installed)

Method based on YouTube video `SSP2z_Vg_ew`, adapted for a full macOS image.

### 1. Prepare in Windows

1.  **Backup:** Back up important Windows data.
2.  **Create Space:** Use Disk Management (`diskmgmt.msc`) to shrink C: drive (min. 60GB). Format the new unallocated space as **exFAT** (e.g., label `macOS`).

### 2. Prepare USB and EFI

1.  Flash macOS `.dmg` image to USB (16GB+) using BalenaEtcher/Rufus.
2.  **Mount the EFI partition** of the USB drive (using ESP Mounter Pro, OCAT, diskpart, etc.).
3.  **Delete** the default EFI folder on the USB EFI partition.
4.  **Copy this repository's EFI folder** onto the USB EFI partition.
5.  **Generate Serials (Mandatory Before Install):** Use [**GenSMBIOS**](https://github.com/corpnewt/GenSMBIOS) or **OC Auxiliary Tool (OCAT)** to generate unique `Serial`, `Board Serial (MLB)`, and `SmUUID` for the `MacBookPro16,1` SMBIOS. Update these values in the `config.plist` on the **USB drive** (`PlatformInfo -> Generic`).
6.  Copy post-install tools ([`HeliPort.dmg`](https://github.com/OpenIntelWireless/HeliPort/releases/latest), [`MyKextInstaller.zip`, `AppleHDA.kext`](https://github.com/Mirone/MyKextInstaller/releases), [`KernelDebugKit.dmg`](https://github.com/dortania/KdkSupportPkg/releases) to a separate exFAT partition on the USB drive (or another USB) for easy access later. 

### 3. Install macOS

1.  Configure BIOS settings (see above).
2.  Boot from the USB drive, select OpenCore.
3.  In OpenCore picker, choose "Install macOS...".
4.  Open **Disk Utility**.
5.  Select the **exFAT** partition created earlier. Erase it as **APFS** (Name: e.g., `Macintosh HD`).
6.  Quit Disk Utility. Select **"Install macOS"**.
7.  Choose the new **APFS volume** as the destination.
8.  Follow prompts. Restart when needed, **always booting from the USB** and the volume name (e.g., "Macintosh HD") in OpenCore picker.

### 4. Post-Installation

1.  Complete the macOS setup assistant.
2.  **Mount EFI:** Once on the macOS desktop, mount your **internal SSD's EFI partition** (using ESP Mounter Pro, OCAT, MountEFI, etc.).
3.  **Copy EFI:** Copy the **EFI folder** from your **USB drive's EFI partition** to your **internal SSD's EFI partition**. (Ensure your generated serials are already in this copied `config.plist`).
4.  **Fix Wi-Fi (HeliPort):**
    * Find the `HeliPort.dmg` file you saved.
    * Open it, drag `HeliPort.app` to your `/Applications` folder.
    * Launch HeliPort. A new Wi-Fi icon will appear in the menu bar. Use this icon to connect to networks.
5.  **Fix Audio (AppleALC Check / Manual Patch):**
    * **Check First:** Your EFI uses `AppleALC.kext` with `layout-id=75`. Test your audio (speakers, headphones). If it works, **skip the rest of this audio step**.
    * **(If No Audio) Manual AppleHDA Patch (Method from video `Rf7fHrlpIiw`):**
        * **Warning:** This is complex and may conflict if `AppleALC` is partially working. Proceed with caution.
        * Find the `KernelDebugKit.dmg` for your specific macOS Tahoe build and install it.
        * Find the `AppleHDA.kext`.
        * Find and unzip `MyKextInstaller.zip`. Run the `My Kext Installer` app.
        * Use the installer app to browse and install the `AppleHDA.kext`.
        * **(If Installer Fails):** You may need to add the boot argument **`amfi=0x80`** to `NVRAM -> Add -> 7C436110... -> boot-args` in your `config.plist` and reboot before the kext installer will work. Remember to remove this argument after installing the kext, as it reduces security.
        * Reboot your computer. Select **"Reset NVRAM"** from the OpenCore boot picker *once*. Audio should now work.
6.  **Fix Windows Time:** Boot into Windows. Open Admin Command Prompt. Run:
    ```cmd
    reg add "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation" /v RealTimeIsUniversal /t REG_DWORD /d 1 /f
    ```
7.  **(Optional):** Make OpenCore default boot manager. In Windows Admin Command Prompt:
    ```cmd
    bcdedit /set {bootmgr} path \EFI\BOOT\bootx64.efi
    ```
8.  **Disable Hibernation:** Boot into macOS. Open Terminal. Run:
    ```bash
    sudo pmset -a hibernatemode 0
    sudo pmset -a standby 0
    sudo pmset -a autopoweroff 0
    sudo rm /var/vm/sleepimage
    ```
9.  **Enable HiDPI Scaling (Optional):**
    * **Purpose:** Makes text and UI elements look sharper on your 1920x1080 display by rendering at a higher resolution and scaling down (like Apple's Retina displays).
    * Download the script: Go to [**one-key-hidpi**](https://github.com/xzhih/one-key-hidpi) and follow the instructions.
10. **Reboot** without the USB drive.
11. Remove Windows Boot Manager from the BIOS Boot Sequence incase it doesn`t boot into OpenCore.

---

## üôè Credits

* **[Acidanthera](https://github.com/acidanthera)** (OpenCore, Kexts)
* **[Dortania](https://dortania.github.io/OpenCore-Install-Guide/)** (Guides)
* **[OpenCore Simplify](https://github.com/lzhoang2801/OpCore-Simplify)** (Initial EFI base)
* **[RehabMan](https://github.com/RehabMan)** (VoodooPS2, ACPI knowledge)
* **[OpenIntelWireless](https://github.com/OpenIntelWireless)** (Intel Wi-Fi/BT kexts)
* **[xzhih](https://github.com/xzhih)** (one-key-hidpi script)
